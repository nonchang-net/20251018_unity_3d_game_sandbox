# 作業レポート 2025-10-15 21:22

## 変更内容の概要

- Lキーからの動的VRM読み込み時に、キャラクターメッシュが意図しない高さに表示される問題を修正しました
- LoadVrmFromFileAsync()とLoadVrmFromBytesAsync()から、不要な位置リセット処理を削除しました
- これにより、起動時のVRM読み込みと動的VRM読み込みの処理フローが統一されました

## 変更理由

Lキーで動的にVRMを読み込んだ際、DefaultSpawnPointのY座標（3.6）の高さ分だけメッシュが上方向にずれて表示される問題がありました。調査の結果、以下の処理フローの違いが原因であることが判明しました：

**起動時の読み込み（LoadVrmAndInitialize）:**
- VRM読み込み後、直接spawnPositionをVRMUtility.SetupVrmCharacter()に渡す

**Lキーでの読み込み（LoadVrmFromFileAsync/LoadVrmFromBytesAsync）:**
- VRM読み込み後、一度Vector3.zeroに位置をリセット
- その後、spawnPositionをVRMUtility.SetupVrmCharacter()に渡す

この不要な位置リセット処理により、VRMのメッシュとボーン情報の座標系にずれが生じ、最終的にメッシュが意図しない位置に表示される問題が発生していました。不要な位置リセット処理を削除することで、起動時と動的読み込みの処理を統一し、問題を解決しました。

## 変更したファイル

- Assets/Scripts/GameManager/GameManager.cs:310-312（LoadVrmFromFileAsync内）
  - `vrmCharacter.transform.position = Vector3.zero`と`vrmCharacter.transform.rotation = Quaternion.identity`の2行を削除

- Assets/Scripts/GameManager/GameManager.cs:474-476（LoadVrmFromBytesAsync内）
  - `vrmCharacter.transform.position = Vector3.zero`と`vrmCharacter.transform.rotation = Quaternion.identity`の2行を削除
