# 作業レポート 2025-10-15 21:35

## 変更内容の概要

- Lキーからの動的VRM読み込み時に、メッシュが高い位置に表示される問題を調査するため、詳細なデバッグログを追加しました
- VRM読み込み直後の位置、メッシュのバウンディングボックス、セットアップ前後の位置を出力するようにしました
- 起動時の読み込みとLキーでの読み込みの動作を比較できるようにしました

## 変更理由

Lキーで動的にVRMを読み込むと、メッシュがDefaultSpawnPointのY座標（3.6）分だけ高い位置に表示される問題があります。一方、起動時のVRM読み込みは正常に動作しています。

両方のコードを確認したところ、処理フローはほぼ同じですが、実際に何が起きているかを確認するため、詳細なデバッグログを追加しました。これにより：

1. VRM読み込み直後のGameObjectの位置
2. メッシュのバウンディングボックス（実際のメッシュの位置）
3. SetupVrmCharacter()前後での位置変化
4. 起動時とLキーでの読み込みでの値の違い

を比較できるようになります。このログ出力を元に、問題の本質的な原因を特定し、適切な修正を行う予定です。

## 変更したファイル

### Assets/Scripts/GameManager/GameManager.cs

1. **LoadVrmAndInitialize() (192-207行目):**
   - VRM読み込み直後の位置とメッシュのバウンディングボックスを出力するデバッグログを追加

2. **LoadVrmFromFileAsync() (310-325行目):**
   - VRM読み込み直後の位置とメッシュのバウンディングボックスを出力するデバッグログを追加

3. **LoadVrmFromBytesAsync() (504-519行目):**
   - VRM読み込み直後の位置とメッシュのバウンディングボックスを出力するデバッグログを追加

### Assets/Scripts/Utilities/VRMUtility.cs

1. **SetupVrmCharacter() (156-169行目):**
   - セットアップ前の位置、設定する位置、位置設定後の値を出力するデバッグログを追加

## 次のステップ

1. GameManagerのInspectorで「Enable Verbose Log」と「Enable Vrm Verbose Log」を有効にする
2. 起動時のVRM読み込みとLキーでの読み込みを実行
3. コンソールログを比較して、どの段階で位置がずれているかを特定
4. 特定した原因に基づいて適切な修正を実施
