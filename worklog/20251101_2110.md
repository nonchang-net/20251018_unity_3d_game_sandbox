# 作業ログ - 20251101_2110

## 変更した内容の概要

GameCameraManagerとGameManagerにInitialize()メソッドを追加し、コンパイル直後の初回再生時に発生していた初期化タイミング問題を解決しました。Script Execution Orderに依存しない設計で、シリアライゼーション完了後に確実に初期化されるようにしました。

**修正ファイル:**
- `Assets/Scripts/Camera/GameCameraManager.cs` - Initialize()メソッドを追加、Start()からの初期化処理を移動
- `Assets/Scripts/GameManager/GameManager.cs` - InitializeManagers()コルーチンを追加、Start()から呼び出し

## なぜそのように変更しようと考えたか

**背景:**
コンパイル直後の初回再生時に「GameCameraManager: トラッキング設定が設定されていません。初期化をスキップします。」という警告が出て、Zキーでのカメラトラッキング切り替えも動作しない問題が発生していました。2回目以降の再生では正常に動作していたため、Unityのシリアライゼーションタイミングの問題であることが判明しました。

**ユーザーの要求:**
「Script Execution Orderの依存は避けたい。初期化順の問題でしたらGameManagerにInitialize()メソッドを追加し、その中で帳尻を合わせるように整えたい。」という明確な指示がありました。

**実装方針:**
InitializeCharacter()と同様の方法で、InitializeManagers()コルーチンを実装しました。これにより：

1. **1フレーム待機**: `yield return null;` でシリアライゼーション完了を待つ
2. **GameCameraManager.Initialize()呼び出し**: トラッキング設定の検証と初期設定の適用を確実に実行
3. **将来の拡張性**: 他のマネージャーの初期化も同じコルーチン内で管理可能

**修正内容:**

GameCameraManager.cs:
```csharp
void Start()
{
    // イベント購読のみに限定
    SubscribeCameraViewChangeEvents();
    SubscribeCameraLockAreaEvents();
}

public void Initialize()
{
    // 参照確認とトラッキング設定の適用
    // (GameManagerから確実に呼び出される)
}
```

GameManager.cs:
```csharp
void Start()
{
    StartCoroutine(InitializeCharacter());
    StartCoroutine(InitializeManagers()); // 追加
    SubscribeDeadEvents();
    SubscribeCheckPointEvents();
}

private IEnumerator InitializeManagers()
{
    yield return null; // シリアライゼーション完了を待つ

    if (cameraManager != null)
    {
        cameraManager.Initialize();
    }

    // 将来的に他のマネージャーの初期化もここで行う
}
```

**効果:**
- コンパイル直後の初回再生時でも、シリアライゼーション完了後に確実に初期化される
- Script Execution Order設定に依存しない設計
- 各マネージャーの初期化を一箇所で管理できる拡張性の高い設計
